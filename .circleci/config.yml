version: 2
jobs:
  build:
    docker:
      - image: katalonstudio/katalon
    environment:
      DOWNLOAD_URL: https://phucknguyen.s3.us-west-2.amazonaws.com/ci-samples.zip
    steps:
      - checkout
      - run:
          name: Download Project from S3
          command: |
            apt install -y unzip
            wget -O snapshot.zip $DOWNLOAD_URL
            unzip snapshot.zip
            mv snapshot/* .
      - run:
          name: Execute Katalon
          command: katalon-execute.sh -browserType="Chrome" -retry=0 -statusDelay=15 -testSuitePath="Test Suites/TS_RegressionTest"
      - store-test_results:
          path: ./report
      - store-artifacts:
          path: ./report
